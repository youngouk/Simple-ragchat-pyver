# 🚀 RAG 챗봇 로컬 실행 가이드

## 📋 1. 사전 요구사항

### 필수 설치 항목
```bash
# Python 3.11+ 확인
python --version  # 3.11 이상 필요

# UV 설치 (Python 패키지 매니저)
curl -LsSf https://astral.sh/uv/install.sh | sh
# 또는: brew install uv (macOS)
# 또는: pip install uv

# Node.js (프론트엔드용, 선택사항)  
node --version  # 18+ 권장
```

## 🔑 2. API 키 설정

`.env` 파일을 편집하여 본인의 API 키로 변경하세요:

```bash
# Google API 설정 (필수)
GOOGLE_API_KEY=your_google_api_key_here

# 추가 LLM API 키들 (선택사항)
ANTHROPIC_API_KEY=your_anthropic_key_here
OPENAI_API_KEY=your_openai_key_here

# Qdrant 설정 (클라우드 권장)
QDRANT_URL=https://your-cluster.qdrant.io:6333
QDRANT_API_KEY=your_qdrant_cloud_api_key
```

### API 키 발급 방법
1. **Google API**: [Google AI Studio](https://aistudio.google.com/app/apikey)
2. **OpenAI**: [OpenAI API Keys](https://platform.openai.com/api-keys)  
3. **Anthropic**: [Anthropic Console](https://console.anthropic.com/)
4. **Qdrant**: [Qdrant Cloud](https://cloud.qdrant.io/) (또는 로컬 설치)

## 🗄️ 3. 벡터 데이터베이스 설정

### Qdrant Cloud 사용 (권장)
```bash
# .env에서 클라우드 설정
QDRANT_URL=https://your-cluster.qdrant.io:6333
QDRANT_API_KEY=your_qdrant_cloud_api_key
```

**로컬 개발시에만** Docker로 임시 테스트용 Qdrant 실행:
```bash
# 임시 테스트용 로컬 Qdrant (프로덕션 비권장)
docker run -p 6333:6333 qdrant/qdrant
```

## 🎯 4. 백엔드 실행

```bash
# 백엔드 디렉토리로 이동
cd backend

# 의존성 설치 및 개발 환경 설정
uv sync
# 또는: make install-dev

# 서버 실행 (개발 모드)
uv run uvicorn main:app --reload --host 0.0.0.0 --port 8002
# 또는: make dev

# 서버 실행 (프로덕션 모드)
# uv run uvicorn main:app --host 0.0.0.0 --port 8002
```

백엔드가 성공적으로 실행되면:
- 🌐 API: http://localhost:8002
- 📊 Health Check: http://localhost:8002/health
- 📖 API 문서: http://localhost:8002/docs

## 🎨 5. 프론트엔드 실행 (선택사항)

```bash
# 프론트엔드 디렉토리로 이동
cd frontend

# 의존성 설치
npm install

# 개발 서버 실행
npm run dev
```

프론트엔드가 실행되면:
- 🖥️ 대시보드: http://localhost:5173

## 🧪 6. 동작 확인

### API 테스트
```bash
# Health Check
curl http://localhost:8002/health

# 채팅 테스트
curl -X POST http://localhost:8002/api/chat \
  -H "Content-Type: application/json" \
  -d '{"message": "안녕하세요!", "session_id": "test"}'

# 문서 업로드 테스트
curl -X POST http://localhost:8002/api/upload \
  -F "file=@your_document.txt"
```

### 브라우저 테스트
1. http://localhost:8002/docs 에서 API 문서 확인
2. http://localhost:5173 에서 프론트엔드 대시보드 사용

## 🔧 7. 트러블슈팅

### 일반적인 문제들

**문제: "ModuleNotFoundError: No module named 'xxx'"**
```bash
# 해결: 의존성 재설치
cd backend
uv sync --reinstall
```

**문제: "Qdrant connection failed"**
```bash
# 로컬 Qdrant 실행 확인
docker ps | grep qdrant

# 또는 클라우드 Qdrant API 키 확인
echo $QDRANT_API_KEY
```

**문제: "Google API authentication failed"**
```bash
# API 키 확인
echo $GOOGLE_API_KEY

# config.yaml 확인
cat backend/app/config/config.yaml
```

**문제: "Port already in use"**
```bash
# 다른 포트 사용
uv run uvicorn main:app --reload --port 8003

# 또는 기존 프로세스 종료
lsof -ti:8002 | xargs kill -9
```

## 📦 8. 추가 명령어

```bash
# 백엔드 디렉토리에서 사용 가능한 명령어들
cd backend

# 전체 명령어 확인
make help

# 코드 품질 검사
make lint

# 테스트 실행
make test

# 타입 체크
make type-check

# 코드 포맷팅
make format
```

## 🎉 성공!

모든 단계가 완료되면 다음과 같은 기능을 사용할 수 있습니다:

- ✅ **문서 업로드**: PDF, TXT, DOCX 등 다양한 형식 지원
- ✅ **실시간 채팅**: AI와 자연어 대화
- ✅ **문서 검색**: 업로드된 문서에서 관련 정보 검색
- ✅ **Multi-LLM**: Google Gemini, OpenAI, Claude 선택 가능
- ✅ **한국어 지원**: 한국어 문서 및 대화 완벽 지원

문제가 발생하면 로그를 확인하거나 GitHub Issues에 문의하세요! 🚀